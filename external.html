<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UCPM Demo – External Web Form</title>

  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin: 0; background: #f6f7f9; }
    .wrap { max-width: 980px; margin: 0 auto; padding: 24px; }
    .card { background: #fff; border-radius: 12px; padding: 18px; margin: 18px 0; box-shadow: 0 2px 10px rgba(0,0,0,.06); }
    a { color: inherit; }
    .muted { color:#6b7280; font-size: 13px; }
  </style>

  <!-- (Tu CSS del snippet) -->
  <style>
    .ot-form-consent { max-width: 500px; padding: 15px; margin: 0 auto; }
    .ot-form-signin .ot-checkbox { margin-bottom: 10px; font-weight: normal; }
    .ot-form-signin .ot-form-control {
      position: relative; height: auto; padding: 10px; font-size: 16px; margin-bottom: 20px;
      display: block; width: 100%; line-height: 1.25;
      border: 1px solid rgba(19, 12, 12, 0.15); border-radius: .25rem;
    }
    .ot-form-signin .ot-form-control:focus { z-index: 2; }
    .ot-form-signin input[type="email"] { margin-bottom: -1px; border-bottom-right-radius: 0; border-bottom-left-radius: 0; }
    .ot-checkbox { margin-top: 10px; }
    .ot-ml-1 { margin-left: 1rem !important; }
    .ot-submit-button {
      display: block; padding: .75rem 1.5rem; font-size: 1.25rem; border-radius: .3rem;
      color: #fff; background-color: #0275d8; border-color: #0275d8; margin: auto; cursor:pointer;
    }
    .back-bar {
      margin-bottom: 16px;
    }

.back-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-radius: 999px;
  text-decoration: none;
  font-size: 13px;
  font-weight: 600;
  color: #1d4ed8;
  background: rgba(37,99,235,.08);
  border: 1px solid rgba(37,99,235,.25);
  transition: all .15s ease;
}

.back-btn:hover {
  background: rgba(37,99,235,.15);
}
  </style>
</head>

<body>
  <main class="wrap">
    <div class="back-bar">
      <a href="./index.html" class="back-btn">← Volver al selector</a>
    </div>
    <h1>External Web Form (HTML + SDK)</h1>
    <p class="muted"><a href="./index.html">← Volver al selector</a></p>

    <section class="card">
      <h2>Formulario External Web Form</h2>
      <p class="muted">Este formulario lo renderizas tú (HTML) y OneTrust gestiona el submit vía su SDK.</p>

      <!-- Snippet OneTrust -->
      <form class="ot-form-consent" action="" method="post" data-ot-cp-id="299d23f4-cdd2-4fc2-9009-9ed75b7719d6-draft" id="otExternalForm">
        <input type="hidden" id="confirmation" name="receiptId" value="" />

        <label for="inputEmail">Email</label>
        <input type="email" id="inputEmail" class="ot-form-control" placeholder="Email" required>

        <label for="Mobile">Mobile</label>
        <input type="text" id="Mobile" class="ot-form-control" placeholder="Mobile">

        <label for="FirstName">FirstName</label>
        <input type="text" id="FirstName" class="ot-form-control" placeholder="FirstName">

        <label for="LastName">LastName</label>
        <input type="text" id="LastName" class="ot-form-control" placeholder="LastName">

        <div class="ot-checkbox">
          <label><input value="Marketing Email Communications" type="checkbox"> Marketing Email Communications</label>
        </div>

        <div class="ot-checkbox">
          <label><input value="Profiling" type="checkbox"> Profiling</label>
        </div>

        <button id="trigger" class="ot-submit-button" type="submit">Submit form</button>
      </form>

      <script
        src="https://privacyportaltrial-cdn.onetrust.com/consent-receipt-scripts/scripts/otconsent-1.0.min.js"
        type="text/javascript"
        data-ot-id="86cfa775-f542-42b6-8f6d-30a22fc81ba1"
        charset="UTF-8"
        id="consent-receipt-script"
        data-ot-consent-register-event="document-load"
      ></script>
    </section>

    <section class="card">
      <h2>Debug</h2>
      <p class="muted">Abre DevTools → Network y filtra por <code>consentreceipts</code>. También puedes ver eventos si tu SDK los emite.</p>
      <pre id="debug" class="muted"></pre>
    </section>
  </main>

  <script>
    // Si el form intentase hacer un POST tradicional, prevenimos recarga (por si acaso).
    // El SDK normalmente intercepta, pero así te aseguras de no “romper” la UX.
    document.getElementById("otExternalForm").addEventListener("submit", function(e){
      e.preventDefault();
      document.getElementById("debug").textContent = "Submit capturado. Revisa Network para ver si el SDK ha enviado el receipt.";
      // El SDK debería enganchar el botón/submit; si no envía nada, revisamos configuración del CP/Integrations.
    });
  </script>
</body>
</html>
