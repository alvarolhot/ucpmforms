<!-- UCPM DEMO VERSION 3.2 â€“ 20:12 -->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UCPM DEMO VERSION 3.2</title>

  <style>
    body { margin:0; background:#f6f7f9; font-family:system-ui; }
    .wrap { max-width:980px; margin:0 auto; padding:24px; }
    .version-banner{
      background:#111827; color:#fff; padding:12px 16px; border-radius:12px;
      font-weight:800; margin-bottom:16px;
    }
    .card { background:#fff; border-radius:14px; padding:16px; border:1px solid #eef0f3; }
    .row { display:flex; gap:10px; flex-wrap:wrap; margin:10px 0; }
    .pill { padding:8px 10px; border-radius:999px; border:1px solid #e5e7eb; background:#fafafa; font-weight:700; font-size:12px; }
    .ok { background:#ecfdf5; border-color:#bbf7d0; color:#047857; }
    .bad { background:#fef2f2; border-color:#fecaca; color:#b91c1c; }
    .warn { background:#fff7ed; border-color:#fed7aa; color:#b45309; }
    code { background:#0b1220; color:#e5e7eb; padding:2px 6px; border-radius:6px; }
    .box { margin-top:12px; padding:12px; border:1px dashed #e5e7eb; border-radius:12px; background:#fff; }
  </style>

  <script
    defer
    src="https://privacyportaltrial.onetrust.com/consent-embedded-forms/consent-receipt-scripts/OtFormStub.js"
    data-id="86cfa775-f542-42b6-8f6d-30a22fc81ba1"
    worker="https://privacyportaltrial.onetrust.com"
  ></script>
</head>

<body>
  <div class="wrap">
    <div class="version-banner">ðŸš€ UCPM DEMO VERSION 3.2 â€“ ENDPOINT DIAGNOSTIC</div>

    <div class="card">
      <div class="row" id="pills"></div>

      <div class="box" id="details">
        Running diagnosticsâ€¦
      </div>
    </div>
  </div>

  <script>
    (function(){
      const pills = document.getElementById("pills");
      const details = document.getElementById("details");

      function pill(text, cls){
        const el = document.createElement("div");
        el.className = "pill " + (cls||"");
        el.textContent = text;
        pills.appendChild(el);
      }

      async function check(url){
        try{
          const r = await fetch(url, { method:"GET", credentials:"omit" });
          return { ok:r.ok, status:r.status, url };
        }catch(e){
          return { ok:false, status:"ERR", url, err:String(e) };
        }
      }

      window.addEventListener("load", async () => {
        // Show what globals exist
        pill("OneTrust.webform: " + (!!(window.OneTrust && window.OneTrust.webform)), (window.OneTrust && window.OneTrust.webform) ? "ok":"warn");
        pill("OtSdk: " + (typeof window.OtSdk === "function"), (typeof window.OtSdk === "function") ? "ok":"warn");

        // Check the endpoint we see failing in your Network
        const url = "https://privacyportaltrial.onetrust.com/cfw/consent/v1/cp/list";
        const res = await check(url);

        if (res.status === 404){
          pill("cfw cp/list: 404", "bad");
          details.innerHTML =
            "Your browser is getting <b>404 Not Found</b> from: <br><code>" + res.url + "</code><br><br>" +
            "That means the <b>Embedded Web Forms service (cfw)</b> is not available on this tenant/host, or the worker host is wrong. " +
            "This is a <b>tenant/service configuration issue</b>, not a GitHub/HTML issue.";
          return;
        }

        if (res.status === "ERR"){
          pill("cfw cp/list: ERR", "bad");
          details.innerHTML =
            "Fetch failed for: <br><code>" + res.url + "</code><br><br>Error: <code>" + res.err + "</code>";
          return;
        }

        pill("cfw cp/list: " + res.status, res.ok ? "ok":"warn");
        details.innerHTML =
          "Endpoint responded with status <b>" + res.status + "</b>:<br><code>" + res.url + "</code><br><br>" +
          "If it is not 404, the service exists. Then we can focus on CP render methods.";
      });
    })();
  </script>
</body>
</html>
